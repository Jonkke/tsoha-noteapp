{% extends "layout.html" %}

{% block body %}
{% if note_id %}
<form id="noteform" method="POST" action="{{ url_for('notes_update', note_id=note_id) }}">
  <div class="form-group">Edit note:</div>
  <div class="form-group">
    {{ form.title.label }}
    {{ form.title(class_="form-control") }}
    <ul>
      {% for error in form.title.errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>

    {{ form.content.label }}
    {{ form.content(class_="form-control") }}

    <div>
      <p>Users with read rights (click to remove rights):</p>
      {% for user in read_users %}
      <a href="{{ url_for('note_remove_rights', user_id=user.id, note_id=note_id, write_only='') }}">{{ user.username }}</a>
      {% endfor %}
    </div>
    <div>
        <p>Users with write rights (click to remove rights):</p>
        {% for user in write_users %}
        <a href="">{{ user.username }}</a>
        {% endfor %}
      </div>

    {% if allowsharing %}
    <h4>You are the owner of this note. You may share it with others on your contacts list:</h4>
    {{ form.sharewith.label }}
    {{ form.sharewith(class_="custom-select custom-select-sm") }}
    {% endif %}

    {{ form.tags.label }}
    {{ form.tags(class_="form-control") }}

    <input class="btn btn-primary" type="submit" value="Update note">

    {#<input type="text" name="title" value="{{ note.title }}">
    <textarea name="content" form="noteform" cols="30" rows="10">{{ note.content }}</textarea>
    <input type="submit" value="Update note">#}
  </div>
</form>
{% else %}
<form id="noteform" method="POST" action="{{ url_for('notes_create') }}">
  <div class="form-group">Add a new note:</div>
  <div class="form-group">
    {{ form.title.label }}
    {{ form.title(class_="form-control") }}
    <ul>
      {% for error in form.title.errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>

    {{ form.content.label }}
    {{ form.content(class_="form-control") }}

    {{ form.sharewith.label }}
    {{ form.sharewith(class_="custom-select custom-select-sm") }}

    {{ form.tags.label }}
    {{ form.tags(class_="form-control") }}

    <input class="btn btn-primary" type="submit" value="Add note">

  </div>
</form>
{% endif %}
{% endblock %}




{# <form id="noteform" method="POST" action="{{ url_for('notes_create') }}">
    <table>
      <tr>
        <td>{{form.title.label}}</td>
        <td>{{form.title}}</td>
        <td>
          <ul>
            {% for error in form.title.errors %}
            <li>{{ error }}</li>
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <td>{{form.content.label}}</td>
        <td>{{form.content}}</td>
      </tr>
      <tr>
        <td>{{form.is_shared.label}}</td>
        <td>{{form.is_shared}}</td>
      </tr>
      <tr>
        <td colspan="2">
          <input type="submit" value="Add note">
        </td>
      </tr>
    </table>
  </form> #}